<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Login Form</title>
    <link rel="stylesheet" href="skin/css/reset.css">
    <link rel='stylesheet prefetch' href='http://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700,900'>
    <link rel='stylesheet prefetch' href='http://fonts.googleapis.com/css?family=Montserrat:400,700'>
    <link rel='stylesheet prefetch' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic'
          rel='stylesheet' type='text/css'>
    <link href="skin/bootstrap/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="skin/css/style.css">
    <link rel="stylesheet" href="skin/css/font-awesome.min.css">
    <link href="skin/css/bootstrap-material-design.css" rel="stylesheet">
  <link href="skin/css/ripples.min.css" rel="stylesheet">
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>
<body>
<div class="form dashboard">
    <div class="dt-title"><i class="fa fa-user-md" aria-hidden="true"></i> Reading</div>

     <div class="col-2">
                <div class="diabetes-model" data-remodal-id="diabetes">
                    <div id="chart_div_diabetes"></div>
                </div>
                <div class="diabetes-model" data-remodal-id="bloodpressure">
                    <div id="chart_div_bp"></div>
                </div>
            </div>
    <ul class="nav" id="side-menu">

                  
                    <li>
                        <a href="/dashboard.html" class="btn btn-raised btn-default"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> 
                        <span>Back</span></a>
                        </li>


                </ul>
    
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

<script src="skin/js/index.js"></script>
<script src="skin/js/jquery.form-validator.min.js"></script>
<script src="skin/js/jquery.smartPlaceholder.min.js"></script>
<!-- Material Design for Bootstrap -->
<script src="skin/js/material.js"></script>
<script src="skin/js/ripples.min.js"></script>
<script src="skin/js/checkuser.js"></script>



 <script type="text/javascript">
 
     $.material.init();
                $.ajax({
                    type: "POST",
                    url: "http://extreme.mu/patient/viewajax",
                    data: 'id='+manageCookie.getCookie('dbid'),
                    crossDomain: true,
                    cache: false,
                    dataType:'json',
                    beforeSend: function() {
                       
                    },
                    success: function(response) {
                        google.charts.load('current', {
        packages: ['corechart', 'line']
    });
    google.charts.setOnLoadCallback(drawBasicDiabeted);
   google.charts.setOnLoadCallback(drawBasicBloodPressure);

    function drawBasicDiabeted() {
        var data = new google.visualization.DataTable();
        data.addColumn('number', 'X');
        data.addColumn('number', 'Diabetes progess');
        var diabetesAr = new Array();
    
         var $array = new Array();
        for(index in response.patientDetails.diabetes){
            $time =  new Date(response.patientDetails.diabetes[index].date).getDate();
            bloodSugarLevel = parseFloat(response.patientDetails.diabetes[index].bloodSugarLevel);
            $array.push([$time,bloodSugarLevel]);// "[{$time},{$diabetes['bloodSugarLevel']}]";
        }
        
       
        data.addRows($array);
        var options = {
            hAxis: {
                title: 'Day'
            },
            vAxis: {
                title: 'Blood Sugar Level'
            },
            width: 500,
            chartArea: {
                width: "50%",
                height: "70%"
            },
            x: {
                0: {
                    side: 'top'
                }
            }
        };
        var chart = new google.visualization.LineChart(document.getElementById('chart_div_diabetes'));
        chart.draw(data, options);
    }

    function drawBasicBloodPressure() {
        var data = new google.visualization.DataTable();
        data.addColumn('number', 'Day');
        data.addColumn('number', 'Systolic');
        data.addColumn('number', 'Diastolic');
        //systolic`, `diastolic`, `patientId`, `heartRate`
        var bpl = new Array();
        var $array = new Array();

        for(index in response.patientDetails.bloodPresure){

            var $time =  new Date(response.patientDetails.bloodPresure[index].date).getDate();
            var systolic =parseFloat(response.patientDetails.bloodPresure[index].systolic);
            var diastolic =parseFloat(response.patientDetails.bloodPresure[index].diastolic);
            $array.push([$time,systolic,diastolic]);// "[{$time},{$diabetes['bloodSugarLevel']}]";
        }
      
        data.addRows($array);
        var options = {
            hAxis: {
                title: 'Day'
            },
            vAxis: {
                title: 'Blood Pressure'
            },
            width: 500,
            chartArea: {
                width: "50%",
                height: "70%"
            },
            x: {
                0: {
                    side: 'top'
                }
            }
        };
        var chart = new google.visualization.LineChart(document.getElementById('chart_div_bp'));
        chart.draw(data, options);
    }
                      
                   
                    },
                    complete: function (data) {
                       // $('#console').html(data);
                       //  $("#login").val('Connecting...');
                    },
                    error:function(data,status,errorThrown) {
                      // $('#console').html(errorThrown); 
                    }

                });
    
    
 </script>

</body>
</html>
